<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulacro Matemáticas S1 - Evaluación ICFES</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
        }

        .container {
            display: flex;
            width: 100%;
            min-height: 100vh;
        }

        .sidebar-left {
            width: 300px;
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            box-shadow: 2px 0 10px rgba(0,0,0,0.1);
            position: fixed;
            height: 100vh;
            overflow-y: auto;
        }

        .main-content {
            flex: 1;
            margin-left: 300px;
            margin-right: 250px;
            padding: 40px 20px;
        }

        .sidebar-right {
            width: 250px;
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            position: fixed;
            right: 0;
            height: 100vh;
            overflow-y: auto;
        }

        .student-info h2 {
            color: #2196f3;
            margin-bottom: 20px;
            font-size: 1.4em;
        }

        .student-name-display {
            background: linear-gradient(45deg, #2196f3, #21cbf3);
            color: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 20px;
            font-weight: bold;
        }

        .progress-container {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .progress-bar {
            background: #e0e0e0;
            border-radius: 20px;
            height: 25px;
            position: relative;
            overflow: hidden;
            margin: 15px 0;
        }

        .progress-fill {
            background: linear-gradient(90deg, #4caf50, #81c784);
            height: 100%;
            border-radius: 20px;
            transition: width 0.5s ease;
            width: 0%;
        }

        .progress-inner {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-weight: bold;
            font-size: 14px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        .page-indicator, .score-display {
            background: white;
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 15px;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .score-number {
            font-size: 2.5em;
            font-weight: bold;
            color: #2196f3;
            margin: 10px 0;
        }

        .page {
            display: none;
            animation: fadeIn 0.5s;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .exercise-card {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            max-width: 900px;
            margin: 0 auto;
        }

        .exercise-card h2 {
            color: #2c3e50;
            margin-bottom: 25px;
            font-size: 1.8em;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }

        .icon {
            margin-right: 10px;
            font-size: 1.2em;
        }

        .equation {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
            font-size: 1.2em;
            font-weight: bold;
            color: #2c3e50;
        }

        .radio-group {
            margin: 25px 0;
        }

        .radio-group label {
            display: block;
            margin: 12px 0;
            padding: 15px;
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.1em;
        }

        .radio-group label:hover {
            background: #e3f2fd;
            border-color: #2196f3;
            transform: translateX(5px);
        }

        .radio-group input[type="radio"] {
            margin-right: 12px;
            transform: scale(1.2);
        }

        .submit-btn {
            background: linear-gradient(45deg, #4caf50, #45a049);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            transition: all 0.3s ease;
            margin: 20px 0;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4);
        }

        .submit-btn:disabled {
            background: #cccccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .feedback {
            margin-top: 20px;
            padding: 15px;
            border-radius: 10px;
            font-weight: bold;
            display: none;
        }

        .feedback.correct {
            background: #d4edda;
            color: #155724;
            border: 2px solid #c3e6cb;
        }

        .feedback.incorrect {
            background: #f8d7da;
            color: #721c24;
            border: 2px solid #f5c6cb;
        }

        .table-container {
            margin: 20px 0;
            overflow-x: auto;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            border-radius: 10px;
            overflow: hidden;
        }

        .data-table th,
        .data-table td {
            padding: 12px 15px;
            text-align: center;
            border-bottom: 1px solid #ddd;
        }

        .data-table th {
            background: linear-gradient(45deg, #2196f3, #21cbf3);
            color: white;
            font-weight: bold;
        }

        .data-table tr:hover {
            background: #f5f5f5;
        }

        .figure-diagram {
            width: 100%;
            max-width: 400px;
            height: 300px;
            margin: 20px auto;
            display: block;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            background: white;
        }

        .welcome-container {
            text-align: center;
            color: white;
        }

        .welcome-container h2 {
            font-size: 2.5em;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .student-input {
            padding: 15px;
            font-size: 1.2em;
            border: 3px solid #ddd;
            border-radius: 25px;
            width: 300px;
            text-align: center;
            margin: 20px;
            transition: border-color 0.3s ease;
        }

        .student-input:focus {
            outline: none;
            border-color: #2196f3;
            box-shadow: 0 0 20px rgba(33, 150, 243, 0.3);
        }

        .start-btn {
            background: linear-gradient(45deg, #ff6b6b, #ffa500);
            color: white;
            border: none;
            padding: 20px 40px;
            border-radius: 30px;
            cursor: pointer;
            font-size: 1.3em;
            font-weight: bold;
            transition: all 0.3s ease;
            margin: 20px;
            box-shadow: 0 6px 20px rgba(255, 107, 107, 0.3);
        }

        .start-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 107, 107, 0.4);
        }

        .nav-btn {
            background: linear-gradient(45deg, #2196f3, #21cbf3);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            margin: 5px 0;
            width: 100%;
            transition: all 0.3s ease;
        }

        .nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(33, 150, 243, 0.3);
        }

        .nav-btn:disabled {
            background: #cccccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .results-container {
            text-align: center;
            color: white;
        }

        .final-score {
            font-size: 4em;
            font-weight: bold;
            color: #4caf50;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            margin: 30px 0;
        }

        .performance-message {
            font-size: 1.5em;
            font-weight: bold;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        .performance-message.excellent {
            background: linear-gradient(45deg, #4caf50, #81c784);
        }

        .performance-message.good {
            background: linear-gradient(45deg, #2196f3, #64b5f6);
        }

        .performance-message.needs-improvement {
            background: linear-gradient(45deg, #ff9800, #ffb74d);
        }

        .achievements-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .achievement {
            background: white;
            color: #2c3e50;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .achievement.gold {
            border-top: 5px solid #ffd700;
        }

        .achievement.silver {
            border-top: 5px solid #c0c0c0;
        }

        .achievement.bronze {
            border-top: 5px solid #cd7f32;
        }

        .download-btn,
        .restart-btn {
            background: linear-gradient(45deg, #9c27b0, #e91e63);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            margin: 10px;
            transition: all 0.3s ease;
        }

        .download-btn:hover,
        .restart-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(156, 39, 176, 0.4);
        }

        .navigation-controls h3 {
            color: #2196f3;
            margin-bottom: 15px;
        }

        /* Estilos para modo aleatorio */
        .random-mode-container {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .random-mode-toggle {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin: 15px 0;
        }

        .random-mode-toggle input[type="checkbox"] {
            transform: scale(1.5);
            cursor: pointer;
        }

        .random-mode-toggle label {
            color: white;
            font-weight: bold;
            font-size: 1.1em;
            cursor: pointer;
        }

        .random-indicator {
            background: linear-gradient(45deg, #ff6b6b, #ffa500);
            color: white;
            padding: 10px 15px;
            border-radius: 25px;
            font-size: 0.9em;
            font-weight: bold;
            display: none;
            margin: 10px 0;
            text-align: center;
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);
        }

        .random-indicator.active {
            display: block;
        }

        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }
            
            .sidebar-left,
            .sidebar-right {
                position: relative;
                width: 100%;
                height: auto;
            }
            
            .main-content {
                margin: 0;
                padding: 20px 10px;
            }
        }
    </style>
</head>
<body>
<div class="container">
    <!-- Sidebar Izquierdo - Información del Estudiante -->
    <div class="sidebar-left">
        <div class="student-info">
            <h2>👤 Estudiante</h2>
            <div class="student-name-display" id="sidebarStudentName">Sin nombre</div>
            
            <div class="random-indicator" id="randomIndicator">
                🎲 MODO ALEATORIO ACTIVADO
            </div>
            
            <div class="progress-container">
                <h3>📊 Progreso General</h3>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                    <div class="progress-inner" id="progressText">0%</div>
                </div>
            </div>
            
            <div class="page-indicator">
                <h3>Pregunta Actual</h3>
                <p id="currentPageName">Inicio</p>
                <p><span id="currentPageNum">0</span> de <span id="totalPages">11</span></p>
            </div>
            
            <div class="score-display">
                <h4>Puntuación</h4>
                <div class="score-number" id="currentScore">0</div>
                <p>de 100 puntos</p>
            </div>
        </div>
    </div>

    <!-- Contenido Principal -->
    <div class="main-content">
        <!-- Página 0: Bienvenida -->
        <div class="page active" id="page0">
            <div class="welcome-container">
                <h2>🎯 ¡Bienvenido al Simulacro Matemáticas S1!</h2>
                <p style="font-size: 1.2em; margin: 20px 0;">Evaluación diseñada para fortalecer tus competencias matemáticas preparatorias para el ICFES.</p>
                
                <div class="random-mode-container">
                    <h3>⚙️ Configuración del Simulacro</h3>
                    <div class="random-mode-toggle">
                        <input type="checkbox" id="randomModeCheckbox" />
                        <label for="randomModeCheckbox">🎲 Activar Modo Aleatorio</label>
                    </div>
                    <p style="font-size: 0.9em; color: rgba(255,255,255,0.8); margin-top: 10px;">
                        En modo aleatorio, las opciones de respuesta se mezclan aleatoriamente para crear una experiencia única cada vez.
                    </p>
                </div>
                
                <div style="background: rgba(255, 255, 255, 0.1); padding: 25px; border-radius: 15px; margin: 30px 0;">
                    <h3>📋 Instrucciones:</h3>
                    <ul style="text-align: left; max-width: 400px; margin: 20px auto; color: white;">
                        <li>Completa 10 preguntas de selección múltiple</li>
                        <li>Cada pregunta evalúa competencias específicas</li>
                        <li>Analiza cuidadosamente cada enunciado</li>
                        <li>Visualiza tu desempeño personalizado al final</li>
                    </ul>
                </div>
                <h3>👤 Ingresa tu nombre completo:</h3>
                <input class="student-input" id="studentName" maxlength="50" placeholder="Escribe tu nombre aquí" type="text"/>
                <br/>
                <button class="start-btn" onclick="startEvaluation()">🚀 Comenzar Simulacro</button>
            </div>
        </div>

        <!-- Páginas de preguntas 1-10 (se generan dinámicamente) -->
        <div class="page" id="page1">
            <div class="exercise-card">
                <h2><span class="icon">🌳</span>Pregunta 1: Análisis Estadístico de Reserva Ambiental</h2>
                <p>Una reserva ambiental tendrá a su cargo nuevos animales. Por tanto, se debe crear hábitats adecuados para cada especie. Para esto, el encargado de la reserva cuenta con la siguiente información:</p>
                
                <div class="table-container">
                    <table class="data-table">
                        <tr>
                            <th>Especie</th>
                            <th>Guacamayas</th>
                            <th>Jaguares</th>
                            <th>Chigüiros</th>
                            <th>Monos tití</th>
                        </tr>
                        <tr>
                            <td><strong>Número de animales por especie</strong></td>
                            <td>50</td>
                            <td>2</td>
                            <td>28</td>
                            <td>20</td>
                        </tr>
                        <tr>
                            <td><strong>Número de machos</strong></td>
                            <td>22</td>
                            <td>1</td>
                            <td>12</td>
                            <td>10</td>
                        </tr>
                        <tr>
                            <td><strong>Número de hembras</strong></td>
                            <td>28</td>
                            <td>1</td>
                            <td>16</td>
                            <td>10</td>
                        </tr>
                        <tr>
                            <td><strong>Número máximo de animales por hábitat</strong></td>
                            <td>30</td>
                            <td>1</td>
                            <td>15</td>
                            <td>10</td>
                        </tr>
                    </table>
                </div>
                
                <h3>Para saber cuántos hábitats nuevos debe adecuar esta reserva ambiental, ¿qué información es necesario tener en cuenta?</h3>
                
                <div class="radio-group" id="optionsQ1">
                    <!-- Las opciones se generarán dinámicamente -->
                </div>
                
                <button class="submit-btn" onclick="checkQuestion(1)" id="submitQ1">✅ Verificar Respuesta</button>
                <div class="feedback" id="feedbackQ1"></div>
            </div>
        </div>

        <div class="page" id="page2">
            <div class="exercise-card">
                <h2><span class="icon">🏢</span>Pregunta 2: Cálculo de Áreas - Procedimiento Geométrico</h2>
                <p>Para remodelar el suelo de la recepción de una oficina con dimensiones 360 cm de ancho y 5 m de largo, se planea utilizar baldosas de 30 cm × 40 cm.</p>
                
                <p>Con el propósito de determinar la cantidad exacta de baldosas que se requieren para remodelar el suelo, uno de los diseñadores de interiores propuso el siguiente procedimiento, pero cometió un error:</p>
                
                <div style="background: #f0f8ff; padding: 20px; border-radius: 10px; margin: 20px 0;">
                    <strong>Paso 1.</strong> Calcular el área del suelo de la recepción multiplicando 360 × 5 = 1800.<br/>
                    <strong>Paso 2.</strong> Calcular el área de una de las baldosas multiplicando 30 × 40 = 1200.<br/>
                    <strong>Paso 3.</strong> Dividir el área del suelo de la recepción entre el área de una de las baldosas 1800 / 1200 = 3 / 2.
                </div>
                
                <h3>¿En cuál paso del procedimiento el diseñador cometió el error?</h3>
                
                <div class="radio-group" id="optionsQ2">
                    <!-- Las opciones se generarán dinámicamente -->
                </div>
                
                <button class="submit-btn" onclick="checkQuestion(2)" id="submitQ2">✅ Verificar Respuesta</button>
                <div class="feedback" id="feedbackQ2"></div>
            </div>
        </div>

        <div class="page" id="page3">
            <div class="exercise-card">
                <h2><span class="icon">🔧</span>Pregunta 3: Optimización de Verificaciones</h2>
                <p>Para la construcción de una lámina de acero rectangular, para el soporte del techo de una casa, el arquitecto exige que se garanticen los siguientes aspectos:</p>
                
                <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin: 20px 0;">
                    <strong>1.</strong> La suma del ancho y el largo de la lámina debe ser al menos 6 m.<br/>
                    <strong>2.</strong> El largo de la lámina debe medir al menos 4 m.<br/>
                    <strong>3.</strong> El área de la lámina debe tener al menos 5 m².<br/>
                    <strong>4.</strong> El ancho de la lámina debe medir al menos 2 m.
                </div>
                
                <p>Una de las anteriores exigencias se cumple si se satisfacen las otras, por lo tanto, de las cuatro exigencias NO es necesario verificar:</p>
                
                <div class="radio-group" id="optionsQ3">
                    <!-- Las opciones se generarán dinámicamente -->
                </div>
                
                <button class="submit-btn" onclick="checkQuestion(3)" id="submitQ3">✅ Verificar Respuesta</button>
                <div class="feedback" id="feedbackQ3"></div>
            </div>
        </div>

        <div class="page" id="page4">
            <div class="exercise-card">
                <h2><span class="icon">🔢</span>Pregunta 4: Análisis Combinatorio</h2>
                <p>Para saber la cantidad de códigos de 4 cifras (donde los dígitos se pueden repetir) que pueden usarse para identificar a los estudiantes de un colegio, se propone el siguiente procedimiento:</p>
                
                <div style="background: #f0f8ff; padding: 20px; border-radius: 10px; margin: 20px 0;">
                    <strong>Paso 1.</strong> Determinar la cantidad de números que hay en el conjunto de dígitos seleccionado.<br/>
                    <strong>Paso 2.</strong> Elevar a la 4 el resultado del paso 1.
                </div>
                
                <p>Para un colegio de 600 estudiantes se elige el conjunto de los dígitos {1, 2, 3, 4, 5}.</p>
                
                <h3>¿Cuántos códigos se pueden obtener con este conjunto, usando el procedimiento anterior?</h3>
                
                <div class="radio-group" id="optionsQ4">
                    <!-- Las opciones se generarán dinámicamente -->
                </div>
                
                <button class="submit-btn" onclick="checkQuestion(4)" id="submitQ4">✅ Verificar Respuesta</button>
                <div class="feedback" id="feedbackQ4"></div>
            </div>
        </div>

        <div class="page" id="page5">
            <div class="exercise-card">
                <h2><span class="icon">📊</span>Pregunta 5: Análisis Probabilístico de Servicios</h2>
                <p>En la gráfica se muestran los resultados de una encuesta realizada a 200 personas, en la que se les preguntó cuál es el servicio que más utilizan de su caja de compensación.</p>
                
                <svg class="figure-diagram" viewBox="0 0 400 250">
                    <rect width="400" height="250" fill="#f8f9fa"/>
                    <!-- Eje Y -->
                    <line x1="50" y1="30" x2="50" y2="200" stroke="#333" stroke-width="2"/>
                    <!-- Eje X -->
                    <line x1="50" y1="200" x2="350" y2="200" stroke="#333" stroke-width="2"/>
                    <!-- Barras -->
                    <rect x="70" y="180" width="40" height="20" fill="#2196f3"/>
                    <rect x="130" y="150" width="40" height="50" fill="#4caf50"/>
                    <rect x="190" y="170" width="40" height="30" fill="#ff9800"/>
                    <rect x="250" y="100" width="40" height="100" fill="#e91e63"/>
                    <rect x="310" y="120" width="40" height="80" fill="#9c27b0"/>
                    <!-- Etiquetas -->
                    <text x="85" y="215" text-anchor="middle" font-size="10">Educación</text>
                    <text x="145" y="215" text-anchor="middle" font-size="10">Crédito</text>
                    <text x="205" y="215" text-anchor="middle" font-size="10">Cultura</text>
                    <text x="265" y="215" text-anchor="middle" font-size="10">Recreación</text>
                    <text x="325" y="215" text-anchor="middle" font-size="10">Turismo</text>
                    <!-- Valores Y -->
                    <text x="40" y="205" font-size="10">0</text>
                    <text x="40" y="185" font-size="10">20</text>
                    <text x="40" y="165" font-size="10">40</text>
                    <text x="40" y="145" font-size="10">60</text>
                    <text x="40" y="125" font-size="10">80</text>
                    <text x="40" y="105" font-size="10">100</text>
                </svg>
                
                <h3>De acuerdo con la información anterior, si se escoge al azar uno de los 200 encuestados, ¿cuál es la probabilidad de que el servicio más utilizado por esta persona sea el turismo?</h3>
                
                <div class="radio-group" id="optionsQ5">
                    <!-- Las opciones se generarán dinámicamente -->
                </div>
                
                <button class="submit-btn" onclick="checkQuestion(5)" id="submitQ5">✅ Verificar Respuesta</button>
                <div class="feedback" id="feedbackQ5"></div>
            </div>
        </div>

        <div class="page" id="page6">
            <div class="exercise-card">
                <h2><span class="icon">📐</span>Pregunta 6: Geometría Aplicada</h2>
                <p>Samuel debe calcular el área correspondiente a la región sombreada en la figura. Para ello, efectúa el procedimiento que se muestra a continuación:</p>
                
                <svg class="figure-diagram" viewBox="0 0 300 200">
                    <rect width="300" height="200" fill="#f8f9fa"/>
                    <!-- Rectángulo exterior -->
                    <rect x="50" y="50" width="200" height="120" fill="none" stroke="#333" stroke-width="2"/>
                    <!-- Rombo interior -->
                    <polygon points="150,70 200,100 150,130 100,100" fill="#e3f2fd" stroke="#2196f3" stroke-width="2"/>
                    <!-- Dimensiones -->
                    <text x="250" y="110" font-size="12">b = 4 cm</text>
                    <text x="150" y="190" font-size="12">a = 3 cm</text>
                    <text x="80" y="45" font-size="12">7 cm</text>
                    <text x="30" y="110" font-size="12">5 cm</text>
                </svg>
                
                <div style="background: #f0f8ff; padding: 20px; border-radius: 10px; margin: 20px 0;">
                    <strong>Paso 1.</strong> Determinar la medida de la hipotenusa del triángulo rectángulo de catetos a = 3 y b = 4, utilizando el teorema de Pitágoras.<br/>
                    <strong>Paso 2.</strong> Encontrar el área de la región sombreada, multiplicando h × h.
                </div>
                
                <h3>El área encontrada por Samuel es:</h3>
                
                <div class="radio-group" id="optionsQ6">
                    <!-- Las opciones se generarán dinámicamente -->
                </div>
                
                <button class="submit-btn" onclick="checkQuestion(6)" id="submitQ6">✅ Verificar Respuesta</button>
                <div class="feedback" id="feedbackQ6"></div>
            </div>
        </div>

        <div class="page" id="page7">
            <div class="exercise-card">
                <h2><span class="icon">🎨</span>Pregunta 7: Análisis Temporal</h2>
                <p>Sofía quiere pintar las paredes de su apartamento. Para ello debe tener en cuenta las instrucciones de la pintura que compró, la cual estipula que se debe aplicar dos capas de pintura, y que la segunda debe esperar 6 horas y 50 minutos después de haber aplicado la primera.</p>
                
                <p>De acuerdo a las instrucciones de la pintura, el tiempo en minutos que debe esperar Sofía después de aplicar la primera capa de pintura para aplicar la segunda capa es de:</p>
                
                <div class="radio-group" id="optionsQ7">
                    <!-- Las opciones se generarán dinámicamente -->
                </div>
                
                <button class="submit-btn" onclick="checkQuestion(7)" id="submitQ7">✅ Verificar Respuesta</button>
                <div class="feedback" id="feedbackQ7"></div>
            </div>
        </div>

        <div class="page" id="page8">
            <div class="exercise-card">
                <h2><span class="icon">🔺</span>Pregunta 8: Geometría del Prisma</h2>
                <p>Se tiene la base de un prisma triangular y se desea hallar el valor del lado x como se muestra en la imagen. Margarita procede a calcular el área del cuadrado.</p>
                
                <svg class="figure-diagram" viewBox="0 0 300 200">
                    <rect width="300" height="200" fill="#f8f9fa"/>
                    <!-- Triángulo -->
                    <polygon points="150,50 100,150 200,150" fill="#e3f2fd" stroke="#2196f3" stroke-width="2"/>
                    <!-- Cuadrado inscrito -->
                    <rect x="125" y="100" width="50" height="50" fill="#fff3e0" stroke="#ff9800" stroke-width="2"/>
                    <!-- Etiquetas -->
                    <text x="145" y="140" font-size="12">x</text>
                    <text x="80" y="170" font-size="12">1</text>
                    <text x="210" y="170" font-size="12">1</text>
                </svg>
                
                <div style="background: #f0f8ff; padding: 20px; border-radius: 10px; margin: 20px 0;">
                    <strong>Paso 1.</strong> Calcula la hipotenusa √(x² + 1²), y obtiene √2.<br/>
                    <strong>Paso 2.</strong> El resultado del paso 1 lo eleva al cuadrado y obtiene como resultado el número 2.
                </div>
                
                <h3>Ahora procede a determinar el valor de X. ¿Cuál es?</h3>
                
                <div class="radio-group" id="optionsQ8">
                    <!-- Las opciones se generarán dinámicamente -->
                </div>
                
                <button class="submit-btn" onclick="checkQuestion(8)" id="submitQ8">✅ Verificar Respuesta</button>
                <div class="feedback" id="feedbackQ8"></div>
            </div>
        </div>

        <div class="page" id="page9">
            <div class="exercise-card">
                <h2><span class="icon">🌡️</span>Pregunta 9: Interpretación Gráfica</h2>
                <p>La gráfica muestra la información correspondiente a la temperatura máxima y mínima alcanzada en una ciudad durante los tres primeros meses del año.</p>
                
                <svg class="figure-diagram" viewBox="0 0 400 250">
                    <rect width="400" height="250" fill="#f8f9fa"/>
                    <!-- Eje Y -->
                    <line x1="50" y1="30" x2="50" y2="200" stroke="#333" stroke-width="2"/>
                    <!-- Eje X -->
                    <line x1="50" y1="200" x2="350" y2="200" stroke="#333" stroke-width="2"/>
                    <!-- Barras Enero -->
                    <rect x="80" y="80" width="30" height="120" fill="#2196f3"/>
                    <rect x="80" y="170" width="30" height="30" fill="#1976d2"/>
                    <!-- Barras Febrero -->
                    <rect x="160" y="100" width="30" height="100" fill="#2196f3"/>
                    <rect x="160" y="180" width="30" height="20" fill="#1976d2"/>
                    <!-- Barras Marzo -->
                    <rect x="240" y="70" width="30" height="130" fill="#2196f3"/>
                    <rect x="240" y="190" width="30" height="10" fill="#1976d2"/>
                    <!-- Etiquetas -->
                    <text x="90" y="220" text-anchor="middle" font-size="12">Enero</text>
                    <text x="170" y="220" text-anchor="middle" font-size="12">Febrero</text>
                    <text x="250" y="220" text-anchor="middle" font-size="12">Marzo</text>
                    <!-- Leyenda -->
                    <rect x="300" y="50" width="15" height="15" fill="#2196f3"/>
                    <text x="320" y="62" font-size="10">Máxima</text>
                    <rect x="300" y="70" width="15" height="15" fill="#1976d2"/>
                    <text x="320" y="82" font-size="10">Mínima</text>
                    <!-- Escala Y -->
                    <text x="40" y="205" font-size="10">0</text>
                    <text x="40" y="185" font-size="10">4</text>
                    <text x="40" y="165" font-size="10">8</text>
                    <text x="40" y="145" font-size="10">12</text>
                    <text x="40" y="125" font-size="10">16</text>
                    <text x="40" y="105" font-size="10">18</text>
                </svg>
                
                <p>A partir de la gráfica, Leonardo afirmó que en enero se presentó la menor diferencia entre la temperatura máxima y la temperatura mínima.</p>
                
                <h3>¿Es correcta la afirmación de Leonardo?</h3>
                
                <div class="radio-group" id="optionsQ9">
                    <!-- Las opciones se generarán dinámicamente -->
                </div>
                
                <button class="submit-btn" onclick="checkQuestion(9)" id="submitQ9">✅ Verificar Respuesta</button>
                <div class="feedback" id="feedbackQ9"></div>
            </div>
        </div>

        <div class="page" id="page10">
            <div class="exercise-card">
                <h2><span class="icon">📏</span>Pregunta 10: Construcción Geométrica</h2>
                <p>Para construir un ángulo de 45°, un estudiante procede de la siguiente manera:</p>
                
                <div style="background: #f0f8ff; padding: 20px; border-radius: 10px; margin: 20px 0;">
                    <strong>Paso 1.</strong> Construye el triángulo PQR que se muestra en la gráfica.<br/>
                    <strong>Paso 2.</strong> Traza el segmento PS, que divide el ángulo QPR en dos ángulos iguales.
                </div>
                
                <svg class="figure-diagram" viewBox="0 0 300 200">
                    <rect width="300" height="200" fill="#f8f9fa"/>
                    <!-- Triángulo -->
                    <line x1="100" y1="150" x2="200" y2="150" stroke="#333" stroke-width="2"/>
                    <line x1="100" y1="150" x2="150" y2="80" stroke="#333" stroke-width="2"/>
                    <line x1="200" y1="150" x2="150" y2="80" stroke="#333" stroke-width="2"/>
                    <!-- Bisectriz -->
                    <line x1="150" y1="80" x2="150" y2="150" stroke="#ff5722" stroke-width="2" stroke-dasharray="5,5"/>
                    <!-- Puntos -->
                    <circle cx="100" cy="150" r="3" fill="#333"/>
                    <circle cx="200" cy="150" r="3" fill="#333"/>
                    <circle cx="150" cy="80" r="3" fill="#333"/>
                    <circle cx="150" cy="150" r="3" fill="#ff5722"/>
                    <!-- Etiquetas -->
                    <text x="95" y="165" font-size="12">Q</text>
                    <text x="205" y="165" font-size="12">R</text>
                    <text x="145" y="75" font-size="12">P</text>
                    <text x="155" y="165" font-size="12">S</text>
                    <!-- Medidas -->
                    <text x="50" y="115" font-size="10">2</text>
                    <text x="230" y="115" font-size="10">2</text>
                    <text x="150" y="170" font-size="10">1</text>
                </svg>
                
                <p>De este modo, el ángulo QPS mide 45°. Ahora bien, otro estudiante asegura que no es necesario el paso 2 para construir un ángulo de 45°.</p>
                
                <h3>¿Es verdadera esta afirmación?</h3>
                
                <div class="radio-group" id="optionsQ10">
                    <!-- Las opciones se generarán dinámicamente -->
                </div>
                
                <button class="submit-btn" onclick="checkQuestion(10)" id="submitQ10">✅ Verificar Respuesta</button>
                <div class="feedback" id="feedbackQ10"></div>
            </div>
        </div>

        <!-- Página 11: Resultados -->
        <div class="page" id="page11">
            <div class="results-container" id="certificateContent">
                <h2>🎓 ¡Simulacro S1 Completado!</h2>
                <div class="student-name-display" id="finalStudentName"></div>
                <div style="text-align: center; margin: 20px 0; padding: 15px; background: rgba(255, 255, 255, 0.1); border-radius: 15px; border: 2px solid #fff;">
                    <h3 style="color: white; margin: 0;">📅 Fecha de Evaluación: <span id="evaluationDate"></span></h3>
                    <h3 style="color: white; margin: 10px 0 0 0;">🏫 Evaluación: Simulacro Matemáticas S1 - ICFES</h3>
                </div>
                <div class="final-score" id="finalScore">0/100</div>
                <div class="performance-message" id="performanceMessage"></div>
                
                <h3 style="color: white;">🏆 Reconocimientos y Logros Obtenidos</h3>
                <div class="achievements-grid" id="achievementsContainer"></div>
                
                <h3 style="color: white;">📊 Desglose Detallado por Competencia</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin: 30px 0;">
                    <div style="background: white; padding: 20px; border-radius: 15px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
                        <h4>Razonamiento Cuantitativo</h4>
                        <div id="reasoningScore" style="font-size: 2em; color: #2196f3; font-weight: bold;">0/40</div>
                    </div>
                    <div style="background: white; padding: 20px; border-radius: 15px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
                        <h4>Competencia Geométrica</h4>
                        <div id="geometryScore" style="font-size: 2em; color: #4caf50; font-weight: bold;">0/30</div>
                    </div>
                    <div style="background: white; padding: 20px; border-radius: 15px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
                        <h4>Estadística y Probabilidad</h4>
                        <div id="statisticsScore" style="font-size: 2em; color: #ff9800; font-weight: bold;">0/30</div>
                    </div>
                </div>
                
                <div style="margin: 40px 0; padding: 20px; background: rgba(255, 255, 255, 0.1); border-radius: 15px; border: 2px solid #fff;">
                    <h4 style="color: white; margin: 0 0 10px 0;">💡 Recomendaciones para el ICFES:</h4>
                    <div id="recommendations" style="text-align: left; line-height: 1.8; color: white;"></div>
                </div>
                
                <div style="margin: 40px 0; text-align: center;">
                    <button class="download-btn" onclick="downloadCertificate()">📄 Descargar Certificado PDF</button>
                    <button class="restart-btn" onclick="restartEvaluation()">🔄 Nueva Evaluación</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Sidebar Derecho - Navegación -->
    <div class="sidebar-right">
        <div class="navigation-controls">
            <h3>📱 Navegación</h3>
            <button class="nav-btn" disabled id="prevBtn" onclick="previousPage()">⬅️ Anterior</button>
            <button class="nav-btn" id="nextBtn" onclick="nextPage()">Siguiente ➡️</button>
            <button class="nav-btn" id="resultsBtn" onclick="showResults()" style="display: none;">📊 Ver Resultados</button>
            
            <div style="margin: 30px 0; padding: 15px; background: white; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                <h4>📋 Preguntas</h4>
                <div style="font-size: 0.9em; line-height: 1.8;">
                    <div id="q1status">1. Reserva Ambiental ⏳</div>
                    <div id="q2status">2. Área Recepción ⏳</div>
                    <div id="q3status">3. Lámina Acero ⏳</div>
                    <div id="q4status">4. Códigos ⏳</div>
                    <div id="q5status">5. Probabilidad ⏳</div>
                    <div id="q6status">6. Área Sombreada ⏳</div>
                    <div id="q7status">7. Tiempo Secado ⏳</div>
                    <div id="q8status">8. Prisma ⏳</div>
                    <div id="q9status">9. Temperatura ⏳</div>
                    <div id="q10status">10. Ángulo 45° ⏳</div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // Variables globales
    let studentName = '';
    let currentPage = 0;
    let totalScore = 0;
    let questionsAnswered = 0;
    let questionScores = {
        q1: 0, q2: 0, q3: 0, q4: 0, q5: 0,
        q6: 0, q7: 0, q8: 0, q9: 0, q10: 0
    };
    let randomMode = false;
    let shuffledQuestions = {};
    
    const pageNames = [
        'Inicio', 'Reserva Ambiental', 'Área Recepción', 'Lámina Acero', 'Códigos', 'Probabilidad',
        'Área Sombreada', 'Tiempo Secado', 'Prisma', 'Temperatura', 'Ángulo 45°', 'Resultados'
    ];

    // Base de datos de preguntas con opciones originales
    const questionsDatabase = {
        1: {
            options: [
                { letter: 'A', text: 'El número de animales por especie y el número de hembras' },
                { letter: 'B', text: 'La cantidad de especies, el número de animales por especie y el número máximo de animales por hábitat' },
                { letter: 'C', text: 'El número de machos de cada especie y el número de hembras' },
                { letter: 'D', text: 'El número máximo de animales por hábitat, el número de machos y la cantidad de especies' }
            ],
            correct: 'B'
        },
        2: {
            options: [
                { letter: 'A', text: 'En el paso 2, porque se multiplicaron cantidades con igual unidad de medida' },
                { letter: 'B', text: 'En el paso 1, porque se debe dividir la medida del ancho del suelo de la recepción entre la medida del ancho de la baldosa' },
                { letter: 'C', text: 'En el paso 1, porque se multiplicaron cantidades expresadas en diferentes unidades de medida' },
                { letter: 'D', text: 'En el paso 2, porque se debe dividir la medida del largo del suelo de la recepción entre la medida del largo de la baldosa' }
            ],
            correct: 'C'
        },
        3: {
            options: [
                { letter: 'A', text: 'La 1, porque se puede verificar de los aspectos 2 y 4' },
                { letter: 'B', text: 'La 2, porque se puede verificar de los aspectos 1 y 4' },
                { letter: 'C', text: 'La 3, porque se puede verificar del aspecto 1' },
                { letter: 'D', text: 'La 4, porque se puede verificar del aspecto 2' }
            ],
            correct: 'A'
        },
        4: {
            options: [
                { letter: 'A', text: '5' },
                { letter: 'B', text: '75' },
                { letter: 'C', text: '625' },
                { letter: 'D', text: '3,125' }
            ],
            correct: 'C'
        },
        5: {
            options: [
                { letter: 'A', text: '20%' },
                { letter: 'B', text: '15%' },
                { letter: 'C', text: '40%' },
                { letter: 'D', text: '30%' }
            ],
            correct: 'C'
        },
        6: {
            options: [
                { letter: 'A', text: '14 cm²' },
                { letter: 'B', text: '50 cm²' },
                { letter: 'C', text: '49 cm²' },
                { letter: 'D', text: '25 cm²' }
            ],
            correct: 'D'
        },
        7: {
            options: [
                { letter: 'A', text: '450 minutos' },
                { letter: 'B', text: '410 minutos' },
                { letter: 'C', text: '390 minutos' },
                { letter: 'D', text: '360 minutos' }
            ],
            correct: 'B'
        },
        8: {
            options: [
                { letter: 'A', text: 'x = 1' },
                { letter: 'B', text: 'x = 2' },
                { letter: 'C', text: 'x = √2-1' },
                { letter: 'D', text: 'x = √(4-1)' }
            ],
            correct: 'A'
        },
        9: {
            options: [
                { letter: 'A', text: 'Sí, porque en enero se registró la temperatura mínima menor que 0°C' },
                { letter: 'B', text: 'No, porque en marzo se registró la temperatura máxima más alejada de la temperatura mínima' },
                { letter: 'C', text: 'Sí, porque en enero se registró la temperatura máxima mensual más baja de los tres períodos' },
                { letter: 'D', text: 'No, porque en marzo se registró la temperatura mínima más cercana a 0°C' }
            ],
            correct: 'D'
        },
        10: {
            options: [
                { letter: 'A', text: 'Sí, porque los ángulos PQR y PRQ obtenidos en el paso 1 miden 45°' },
                { letter: 'B', text: 'No, porque el segmento PS divide el ángulo recto en dos ángulos de 45°' },
                { letter: 'C', text: 'Sí, porque el ángulo QPR construido en el paso 1 mide 45°' },
                { letter: 'D', text: 'No, porque se desconoce la medida de todos los ángulos del triángulo PQR' }
            ],
            correct: 'A'
        }
    };

    // Función para mezclar array (algoritmo Fisher-Yates)
    function shuffleArray(array) {
        const shuffled = [...array];
        for (let i = shuffled.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
        }
        return shuffled;
    }

    // Función para preparar preguntas en modo aleatorio
    function prepareRandomQuestions() {
        shuffledQuestions = {};
        
        for (let questionNum = 1; questionNum <= 10; questionNum++) {
            const originalQuestion = questionsDatabase[questionNum];
            const shuffledOptions = shuffleArray(originalQuestion.options);
            
            // Encontrar dónde quedó la respuesta correcta después del mezclado
            const correctOptionIndex = shuffledOptions.findIndex(option => 
                option.letter === originalQuestion.correct
            );
            
            // Asignar nuevas letras A, B, C, D según el nuevo orden
            const newCorrectLetter = String.fromCharCode(65 + correctOptionIndex); // 65 es 'A' en ASCII
            
            shuffledQuestions[questionNum] = {
                options: shuffledOptions.map((option, index) => ({
                    ...option,
                    newLetter: String.fromCharCode(65 + index)
                })),
                correct: newCorrectLetter
            };
        }
    }

    // Función para renderizar las opciones de una pregunta
    function renderQuestionOptions(questionNum) {
        const optionsContainer = document.getElementById(`optionsQ${questionNum}`);
        let optionsHTML = '';
        
        if (randomMode && shuffledQuestions[questionNum]) {
            // Usar opciones mezcladas
            const questionData = shuffledQuestions[questionNum];
            questionData.options.forEach(option => {
                optionsHTML += `
                    <label>
                        <input type="radio" name="q${questionNum}" value="${option.newLetter}"/>
                        ${option.newLetter}. ${option.text}
                    </label>
                `;
            });
        } else {
            // Usar opciones originales
            const questionData = questionsDatabase[questionNum];
            questionData.options.forEach(option => {
                optionsHTML += `
                    <label>
                        <input type="radio" name="q${questionNum}" value="${option.letter}"/>
                        ${option.letter}. ${option.text}
                    </label>
                `;
            });
        }
        
        optionsContainer.innerHTML = optionsHTML;
    }

    // Función para obtener la respuesta correcta
    function getCorrectAnswer(questionNum) {
        if (randomMode && shuffledQuestions[questionNum]) {
            return shuffledQuestions[questionNum].correct;
        } else {
            return questionsDatabase[questionNum].correct;
        }
    }

    function startEvaluation() {
        const nameInput = document.getElementById('studentName');
        studentName = nameInput.value.trim();
        
        if (studentName === '') {
            alert('Por favor, ingresa tu nombre para continuar.');
            return;
        }
        
        // Verificar si el modo aleatorio está activado
        randomMode = document.getElementById('randomModeCheckbox').checked;
        
        if (randomMode) {
            prepareRandomQuestions();
            document.getElementById('randomIndicator').classList.add('active');
        } else {
            document.getElementById('randomIndicator').classList.remove('active');
        }
        
        // Renderizar todas las preguntas con las opciones correspondientes
        for (let i = 1; i <= 10; i++) {
            renderQuestionOptions(i);
        }
        
        document.getElementById('sidebarStudentName').textContent = studentName;
        showPage(1);
    }

    function showPage(pageNum) {
        document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
        document.getElementById(`page${pageNum}`).classList.add('active');
        
        currentPage = pageNum;
        updateNavigation();
        updateProgress();
    }

    function nextPage() {
        if (currentPage < 11) {
            showPage(currentPage + 1);
        }
    }

    function previousPage() {
        if (currentPage > 0) {
            showPage(currentPage - 1);
        }
    }

    function updateNavigation() {
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        
        prevBtn.disabled = currentPage === 0;
        nextBtn.disabled = currentPage === 11;
        
        if (currentPage === 11) {
            nextBtn.style.display = 'none';
        } else {
            nextBtn.style.display = 'inline-block';
        }
        
        document.getElementById('currentPageName').textContent = pageNames[currentPage];
        document.getElementById('currentPageNum').textContent = currentPage;
    }

    function updateProgress() {
        const percentage = (questionsAnswered / 10) * 100;
        document.getElementById('progressFill').style.width = percentage + '%';
        document.getElementById('progressText').textContent = Math.round(percentage) + '%';
        document.getElementById('currentScore').textContent = totalScore;
    }

    function checkQuestion(questionNum) {
        const selectedRadio = document.querySelector(`input[name="q${questionNum}"]:checked`);
        
        if (!selectedRadio) {
            alert('Por favor, selecciona una respuesta antes de verificar.');
            return;
        }
        
        const correctAnswer = getCorrectAnswer(questionNum);
        const isCorrect = selectedRadio.value === correctAnswer;
        const feedbackEl = document.getElementById(`feedbackQ${questionNum}`);
        const submitBtn = document.getElementById(`submitQ${questionNum}`);
        
        // Marcar respuesta correcta e incorrecta
        document.querySelectorAll(`input[name="q${questionNum}"]`).forEach(radio => {
            radio.disabled = true;
            if (radio.value === correctAnswer) {
                radio.parentElement.style.background = '#d4edda';
                radio.parentElement.style.borderColor = '#28a745';
            } else if (radio.checked && radio.value !== correctAnswer) {
                radio.parentElement.style.background = '#f8d7da';
                radio.parentElement.style.borderColor = '#dc3545';
            }
        });
        
        // Actualizar puntuación
        if (isCorrect) {
            questionScores[`q${questionNum}`] = 10;
            totalScore += 10;
            feedbackEl.className = 'feedback correct';
        } else {
            questionScores[`q${questionNum}`] = 0;
            feedbackEl.className = 'feedback incorrect';
        }
        
        questionsAnswered++;
        feedbackEl.style.display = 'block';
        
        // Explicaciones específicas
        const explanations = {
            1: isCorrect ? '¡Correcto! Se necesita saber la cantidad de animales por especie y el máximo por hábitat para calcular cuántos hábitats se requieren.' : 'Incorrecto. Para calcular hábitats necesarios se requiere: especies, animales por especie y máximo por hábitat.',
            2: isCorrect ? '¡Correcto! No se pueden multiplicar directamente centímetros y metros sin convertir a la misma unidad.' : 'Incorrecto. El error está en multiplicar cantidades con diferentes unidades de medida sin conversión.',
            3: isCorrect ? '¡Correcto! Si se cumplen los aspectos 2 y 4 (largo ≥ 4m y ancho ≥ 2m), automáticamente se cumple el aspecto 1 (suma ≥ 6m).' : 'Incorrecto. Analiza qué exigencia se cumple automáticamente si se satisfacen las otras.',
            4: isCorrect ? '¡Correcto! Con 5 dígitos que se pueden repetir en 4 posiciones: 5⁴ = 625 códigos.' : 'Incorrecto. Para códigos de 4 cifras con 5 dígitos disponibles que se pueden repetir: 5⁴.',
            5: isCorrect ? '¡Correcto! Turismo tiene 80 personas de 200 total: 80/200 = 40%.' : 'Incorrecto. Observa la altura de la barra de turismo en la gráfica.',
            6: isCorrect ? '¡Correcto! Hipotenusa = √(3² + 4²) = √(9 + 16) = √25 = 5. Área = 5² = 25 cm².' : 'Incorrecto. Calcula la hipotenusa con el teorema de Pitágoras y luego elévala al cuadrado.',
            7: isCorrect ? '¡Correcto! 6 horas y 50 minutos = 6 × 60 + 50 = 360 + 50 = 410 minutos.' : 'Incorrecto. Convierte 6 horas a minutos y suma los 50 minutos adicionales.',
            8: isCorrect ? '¡Correcto! Si la hipotenusa es √2 y uno de los catetos es 1, entonces x = 1.' : 'Incorrecto. En un triángulo rectángulo isósceles con catetos iguales a 1, x = 1.',
            9: isCorrect ? '¡Correcto! En marzo la temperatura mínima está más cerca de 0°C, lo que indica menor diferencia con la máxima.' : 'Incorrecto. Observa cuál mes tiene menor diferencia entre temperatura máxima y mínima.',
            10: isCorrect ? '¡Correcto! En un triángulo isósceles rectángulo, los ángulos de la base miden 45° cada uno.' : 'Incorrecto. En el triángulo PQR isósceles rectángulo, los ángulos PQR y PRQ ya miden 45°.'
        };
        
        feedbackEl.textContent = `${explanations[questionNum]} (${questionScores[`q${questionNum}`]}/10 puntos)`;
        
        submitBtn.disabled = true;
        updateQuestionStatus(questionNum, isCorrect);
        updateProgress();
        
        if (questionsAnswered === 10) {
            document.getElementById('resultsBtn').style.display = 'inline-block';
        }
    }

    function updateQuestionStatus(questionNum, isCorrect) {
        const statusEl = document.getElementById(`q${questionNum}status`);
        const questionName = statusEl.textContent.split(' ').slice(1).join(' ').replace(/[✅❌⏳]/g, '');
        statusEl.innerHTML = `${questionNum}. ${questionName} ${isCorrect ? '✅' : '❌'}`;
    }

    function showResults() {
        // Actualizar información final
        document.getElementById('finalStudentName').textContent = studentName;
        document.getElementById('finalScore').textContent = `${totalScore}/100`;
        document.getElementById('evaluationDate').textContent = new Date().toLocaleDateString();
        
        // Calcular puntuaciones por área
        const reasoningScore = questionScores.q1 + questionScores.q2 + questionScores.q3 + questionScores.q4;
        const geometryScore = questionScores.q6 + questionScores.q8 + questionScores.q10;
        const statisticsScore = questionScores.q5 + questionScores.q7 + questionScores.q9;
        
        document.getElementById('reasoningScore').textContent = `${reasoningScore}/40`;
        document.getElementById('geometryScore').textContent = `${geometryScore}/30`;
        document.getElementById('statisticsScore').textContent = `${statisticsScore}/30`;
        
        // Generar mensaje de rendimiento
        const percentage = (totalScore / 100) * 100;
        const messageEl = document.getElementById('performanceMessage');
        const recommendationsEl = document.getElementById('recommendations');
        
        if (percentage >= 80) {
            messageEl.className = 'performance-message excellent';
            messageEl.textContent = '🏆 ¡EXCELENTE! Tienes un dominio sobresaliente de las competencias matemáticas.';
            recommendationsEl.innerHTML = `
                <p>• Continúa practicando con simulacros completos del ICFES</p>
                <p>• Enfócate en optimizar tu velocidad de resolución</p>
                <p>• Revisa estrategias avanzadas de eliminación de respuestas</p>
            `;
        } else if (percentage >= 60) {
            messageEl.className = 'performance-message good';
            messageEl.textContent = '👍 ¡BUEN TRABAJO! Tienes una base sólida. Fortalece las áreas de menor puntaje.';
            recommendationsEl.innerHTML = `
                <p>• Refuerza las competencias con menor puntuación</p>
                <p>• Practica más ejercicios de razonamiento cuantitativo</p>
                <p>• Resuelve problemas contextualizados similares al ICFES</p>
            `;
        } else {
            messageEl.className = 'performance-message needs-improvement';
            messageEl.textContent = '📚 REQUIERE MEJORA. Te recomendamos reforzar los conceptos fundamentales.';
            recommendationsEl.innerHTML = `
                <p>• Repasa los conceptos básicos de cada competencia</p>
                <p>• Solicita apoyo académico en las áreas más débiles</p>
                <p>• Dedica más tiempo al estudio de matemáticas</p>
            `;
        }
        
        generateAchievements();
        showPage(11);
    }

    function generateAchievements() {
        const achievements = [];
        const percentage = (totalScore / 100) * 100;
        
        if (percentage >= 90) {
            achievements.push({
                icon: '🏆',
                title: 'Excelencia Matemática',
                description: 'Dominio sobresaliente del simulacro',
                class: 'gold'
            });
        } else if (percentage >= 80) {
            achievements.push({
                icon: '⭐',
                title: 'Preparado para ICFES',
                description: 'Excelente nivel matemático',
                class: 'gold'
            });
        } else if (percentage >= 70) {
            achievements.push({
                icon: '👍',
                title: 'Buen Nivel Matemático',
                description: 'Sólida comprensión',
                class: 'silver'
            });
        }
        
        // Logros específicos por competencias
        const reasoningScore = questionScores.q1 + questionScores.q2 + questionScores.q3 + questionScores.q4;
        if (reasoningScore >= 30) {
            achievements.push({
                icon: '🧮',
                title: 'Maestro del Razonamiento',
                description: 'Domina el pensamiento cuantitativo',
                class: 'gold'
            });
        }
        
        const geometryScore = questionScores.q6 + questionScores.q8 + questionScores.q10;
        if (geometryScore >= 20) {
            achievements.push({
                icon: '📐',
                title: 'Experto en Geometría',
                description: 'Excelente manejo espacial',
                class: 'silver'
            });
        }
        
        const statisticsScore = questionScores.q5 + questionScores.q7 + questionScores.q9;
        if (statisticsScore >= 20) {
            achievements.push({
                icon: '📊',
                title: 'Analista Estadístico',
                description: 'Domina datos y probabilidades',
                class: 'bronze'
            });
        }
        
        if (questionsAnswered === 10) {
            achievements.push({
                icon: '🎯',
                title: 'Perseverancia',
                description: 'Completó todas las preguntas',
                class: 'bronze'
            });
        }
        
        // Logro especial para modo aleatorio
        if (randomMode) {
            achievements.push({
                icon: '🎲',
                title: 'Explorador Aleatorio',
                description: 'Desafió el modo aleatorio',
                class: 'silver'
            });
        }
        
        // Renderizar logros
        const container = document.getElementById('achievementsContainer');
        container.innerHTML = achievements.map(achievement => `
            <div class="achievement ${achievement.class}">
                <div style="font-size: 2em; margin-bottom: 10px;">${achievement.icon}</div>
                <h4>${achievement.title}</h4>
                <p>${achievement.description}</p>
            </div>
        `).join('');
    }

    function downloadCertificate() {
        // Crear una nueva ventana para el certificado
        const printWindow = window.open('', '_blank');
        
        // Obtener los datos actuales
        const studentNameText = document.getElementById('finalStudentName').textContent;
        const finalScoreText = document.getElementById('finalScore').textContent;
        const evaluationDateText = document.getElementById('evaluationDate').textContent;
        const performanceMessageText = document.getElementById('performanceMessage').textContent;
        const reasoningScoreText = document.getElementById('reasoningScore').textContent;
        const geometryScoreText = document.getElementById('geometryScore').textContent;
        const statisticsScoreText = document.getElementById('statisticsScore').textContent;
        const recommendationsHTML = document.getElementById('recommendations').innerHTML;
        const achievementsHTML = document.getElementById('achievementsContainer').innerHTML;
        
        // Indicador de modo aleatorio
        const randomModeText = randomMode ? '🎲 COMPLETADO EN MODO ALEATORIO' : '';
        
        // HTML del certificado con estilos completos
        const certificateHTML = `
        <!DOCTYPE html>
        <html lang="es">
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>Certificado - Simulacro Matemáticas S1</title>
            <style>
                * {
                    margin: 0;
                    padding: 0;
                    box-sizing: border-box;
                }
                
                body {
                    font-family: 'Arial', sans-serif;
                    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                    min-height: 100vh;
                    padding: 20px;
                    color: white;
                }
                
                .certificate-container {
                    max-width: 800px;
                    margin: 0 auto;
                    text-align: center;
                }
                
                .certificate-header {
                    margin-bottom: 30px;
                }
                
                .certificate-title {
                    font-size: 2.5em;
                    margin-bottom: 20px;
                    text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
                }
                
                .student-name-display {
                    background: linear-gradient(45deg, #2196f3, #21cbf3);
                    color: white;
                    padding: 15px;
                    border-radius: 10px;
                    text-align: center;
                    margin-bottom: 20px;
                    font-weight: bold;
                    font-size: 1.2em;
                }
                
                .random-indicator {
                    background: linear-gradient(45deg, #ff6b6b, #ffa500);
                    color: white;
                    padding: 10px 15px;
                    border-radius: 25px;
                    font-size: 0.9em;
                    font-weight: bold;
                    margin: 10px 0;
                    text-align: center;
                    box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);
                }
                
                .evaluation-info {
                    text-align: center;
                    margin: 20px 0;
                    padding: 15px;
                    background: rgba(255, 255, 255, 0.1);
                    border-radius: 15px;
                    border: 2px solid #fff;
                }
                
                .evaluation-info h3 {
                    color: white;
                    margin: 0;
                    font-size: 1.1em;
                }
                
                .final-score {
                    font-size: 4em;
                    font-weight: bold;
                    color: #4caf50;
                    text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
                    margin: 30px 0;
                }
                
                .performance-message {
                    font-size: 1.3em;
                    font-weight: bold;
                    padding: 20px;
                    border-radius: 15px;
                    margin: 20px 0;
                    text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
                }
                
                .performance-message.excellent {
                    background: linear-gradient(45deg, #4caf50, #81c784);
                }
                
                .performance-message.good {
                    background: linear-gradient(45deg, #2196f3, #64b5f6);
                }
                
                .performance-message.needs-improvement {
                    background: linear-gradient(45deg, #ff9800, #ffb74d);
                }
                
                .section-title {
                    color: white;
                    font-size: 1.5em;
                    margin: 30px 0 20px 0;
                    text-align: center;
                }
                
                .achievements-grid {
                    display: grid;
                    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                    gap: 20px;
                    margin: 30px 0;
                }
                
                .achievement {
                    background: white;
                    color: #2c3e50;
                    padding: 20px;
                    border-radius: 15px;
                    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
                    text-align: center;
                }
                
                .achievement.gold {
                    border-top: 5px solid #ffd700;
                }
                
                .achievement.silver {
                    border-top: 5px solid #c0c0c0;
                }
                
                .achievement.bronze {
                    border-top: 5px solid #cd7f32;
                }
                
                .achievement h4 {
                    margin: 10px 0;
                    font-size: 1.1em;
                }
                
                .competency-scores {
                    display: grid;
                    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                    gap: 20px;
                    margin: 30px 0;
                }
                
                .competency-card {
                    background: white;
                    padding: 20px;
                    border-radius: 15px;
                    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
                    text-align: center;
                }
                
                .competency-card h4 {
                    color: #2c3e50;
                    margin-bottom: 10px;
                }
                
                .competency-score {
                    font-size: 2em;
                    font-weight: bold;
                    margin: 10px 0;
                }
                
                .score-reasoning { color: #2196f3; }
                .score-geometry { color: #4caf50; }
                .score-statistics { color: #ff9800; }
                
                .recommendations {
                    margin: 40px 0;
                    padding: 20px;
                    background: rgba(255, 255, 255, 0.1);
                    border-radius: 15px;
                    border: 2px solid #fff;
                    text-align: left;
                }
                
                .recommendations h4 {
                    color: white;
                    margin: 0 0 10px 0;
                    text-align: center;
                }
                
                .recommendations p {
                    line-height: 1.8;
                    color: white;
                    margin: 5px 0;
                }
                
                .certificate-footer {
                    margin-top: 40px;
                    padding: 20px;
                    border-top: 2px solid rgba(255,255,255,0.3);
                    font-size: 0.9em;
                    color: rgba(255,255,255,0.8);
                }
                
                @media print {
                    body {
                        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                        -webkit-print-color-adjust: exact;
                        color-adjust: exact;
                    }
                }
            </style>
        </head>
        <body>
            <div class="certificate-container">
                <div class="certificate-header">
                    <h1 class="certificate-title">🎓 ¡Simulacro S1 Completado!</h1>
                    <div class="student-name-display">${studentNameText}</div>
                    ${randomModeText ? `<div class="random-indicator">${randomModeText}</div>` : ''}
                    
                    <div class="evaluation-info">
                        <h3>📅 Fecha de Evaluación: ${evaluationDateText}</h3>
                        <h3>🏫 Evaluación: Simulacro Matemáticas S1 - ICFES</h3>
                    </div>
                </div>
                
                <div class="final-score">${finalScoreText}</div>
                <div class="performance-message ${getPerformanceClass()}">${performanceMessageText}</div>
                
                <h3 class="section-title">🏆 Reconocimientos y Logros Obtenidos</h3>
                <div class="achievements-grid">${achievementsHTML}</div>
                
                <h3 class="section-title">📊 Desglose Detallado por Competencia</h3>
                <div class="competency-scores">
                    <div class="competency-card">
                        <h4>Razonamiento Cuantitativo</h4>
                        <div class="competency-score score-reasoning">${reasoningScoreText}</div>
                    </div>
                    <div class="competency-card">
                        <h4>Competencia Geométrica</h4>
                        <div class="competency-score score-geometry">${geometryScoreText}</div>
                    </div>
                    <div class="competency-card">
                        <h4>Estadística y Probabilidad</h4>
                        <div class="competency-score score-statistics">${statisticsScoreText}</div>
                    </div>
                </div>
                
                <div class="recommendations">
                    <h4>💡 Recomendaciones para el ICFES:</h4>
                    ${recommendationsHTML}
                </div>
                
                <div class="certificate-footer">
                    <p>Certificado generado automáticamente por el Sistema de Simulacros ICFES</p>
                    <p>Institución Educativa - Preparación Académica Integral</p>
                    ${randomModeText ? '<p><strong>Simulacro realizado en modo aleatorio para máxima variabilidad de práctica</strong></p>' : ''}
                </div>
            </div>
        </body>
        </html>`;
        
        // Escribir el contenido en la nueva ventana
        printWindow.document.write(certificateHTML);
        printWindow.document.close();
        
        // Esperar a que se cargue completamente y luego imprimir
        printWindow.onload = function() {
            setTimeout(() => {
                printWindow.print();
                printWindow.close();
            }, 500);
        };
    }
    
    function getPerformanceClass() {
        const percentage = (totalScore / 100) * 100;
        if (percentage >= 80) return 'excellent';
        if (percentage >= 60) return 'good';
        return 'needs-improvement';
    }

    function restartEvaluation() {
        studentName = '';
        currentPage = 0;
        totalScore = 0;
        questionsAnswered = 0;
        randomMode = false;
        shuffledQuestions = {};
        questionScores = {
            q1: 0, q2: 0, q3: 0, q4: 0, q5: 0,
            q6: 0, q7: 0, q8: 0, q9: 0, q10: 0
        };
        
        document.getElementById('studentName').value = '';
        document.getElementById('randomModeCheckbox').checked = false;
        document.getElementById('sidebarStudentName').textContent = 'Sin nombre';
        document.getElementById('randomIndicator').classList.remove('active');
        
        // Limpiar todas las respuestas y estados
        for (let i = 1; i <= 10; i++) {
            const optionsContainer = document.getElementById(`optionsQ${i}`);
            optionsContainer.innerHTML = '';
            
            document.getElementById(`feedbackQ${i}`).style.display = 'none';
            document.getElementById(`submitQ${i}`).disabled = false;
            
            const statusEl = document.getElementById(`q${i}status`);
            const questionName = statusEl.textContent.split(' ').slice(1).join(' ').replace(/[✅❌]/g, '');
            statusEl.innerHTML = `${i}. ${questionName} ⏳`;
        }
        
        document.getElementById('resultsBtn').style.display = 'none';
        showPage(0);
    }

    // Inicializar la aplicación
    document.addEventListener('DOMContentLoaded', function() {
        // No renderizar opciones por defecto - solo cuando se inicie la evaluación
        updateProgress();
        updateNavigation();
    });
</script>
</body>
</html>